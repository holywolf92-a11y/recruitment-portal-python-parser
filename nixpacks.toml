# Nixpacks configuration for Railway deployment
# Installs system dependencies required for face-recognition library

[phases.setup]
nixPkgs = [
  "python310",
  "gcc",
  "cmake",
  "pkg-config",
  "libX11",           # X11 client library (required by dlib)
  "xorg.libXext",     # X11 extensions
  "xorg.libXrender",  # X11 Render extension
  "libGL",            # OpenGL library
  "glib"              # GLib library
]

[phases.install]
cmds = ["pip install --upgrade pip", "pip install -r requirements.txt"]

[phases.build]
cmds = []

[start]
cmd = "uvicorn main:app --host 0.0.0.0 --port 8000"
